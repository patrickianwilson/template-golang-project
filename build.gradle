project.version = 'dev.1'
project.group = "com.github.patrickianwilson"

buildscript {
    repositories {
        maven {
            url "http://repository.inquestdevops.com/repository/inquest-oss-releases/"
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
        mavenCentral()
        mavenLocal()
    }
    dependencies {
        classpath "com.inquestdevops:WarblerBuildGradlePlugin:1.0.+"
        classpath "com.inquestdevops:WarblerPublishGradlePlugin:1.0.+"
    }
}

ext {
    moduleName = "template-golang-project" //change me!!
    rootPackage = ""
    mainPackage = "github.com/patrickianwilson/server"
    platformTargets = ["linux:amd64","darwin:amd64"]
    testPackages = ["github.com/patrickianwilson/controllers"] //change me!
    dockerTag = "${moduleName.toLowerCase()}:latest"
    dockerFile = "deploy/Dockerfile"
    dockerImagePath="us.gcr.io/inlaid-citron-94802/services/${moduleName.toLowerCase()}:${version}"
}

apply plugin: "project.go"
apply plugin: "publish.docker"

repositories {
    maven {
        url "http://repository.inquestdevops.com/repository/inquest-oss-releases/"
    }
    mavenCentral()
    mavenLocal()
}

dependencies {
    compile "com.github.patrickianwilson:GoWebAppTemplateManager:1.0.+"
}


task copyWebAssets(type: Copy) {
    from "${projectDir}/assets"
    into "${buildDir}/assets"
    outputs.upToDateWhen {false}
}


task copyWebTemplates(type: Copy) {
    from "${projectDir}/templates"
    into "${buildDir}/templates"
    outputs.upToDateWhen {false}
}


tasks.pkg.dependsOn "copyWebAssets"
tasks.pkg.dependsOn "copyWebTemplates"
